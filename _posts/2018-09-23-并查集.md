---
layout: post
title: 并查集
date: 2018-9-23
categories: blog
tags: [数据结构,可持久化]
description: 维护可并集的数据结构
hide: true
---

~~这么基础的东西网上一片,所以只讲优化~~  
- 路径压缩:  
递归访问一个集合的根节点时将所有访问到的点接到根节点下.  
Code: 
```cpp
int find(int x,int *fa)
{
	if(fa[x] == x) return x;
	return fa[x] = find(fa[x] , fa);
}
```

- 按秩合并:  
如果一个点是根,记录它的字树深度.  
合并时把深度小的接到深度大的字树下.  
深度相等的两个树合并会导致深度+1.  
Code:
```cpp
inline void add(int x,int y,int *fa,int *deep)
{
	x = find(x , fa);
	y = find(y , fa);
	if(deep[x] < deep[y])
		fa[x] = y;
	else 
		fa[y] = x;
	if(deep[x] == deep[y])
		deep[x] ++;
}
```

- 可持久化:  
